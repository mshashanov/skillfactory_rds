# Проект 5. Выбираем авто выгодно
## Постановка задачи
Необходимо разработать модель предсказания рыночной цены автомобиля при продаже 
по различным характеристикам, указанным в объявлении. При достаточной точности, данная модель 
может использоваться для поиска выгодных объявлений, предлагающих автомобиль по цене ниже рыночной для данного объекта.

Метрикой данной задачи (score) является MAPE – средняя абсолютная ошибка предсказания цены в %.

## Решение
### Парсинг данных
В данном проекте использовался вновь собранный набор данных по объявлениям на сайте auto.ru в ноябре 2020г.
Для сбора данных применялся скрипт из проекта https://github.com/ns-ekimenko/skillfactory_rds/blob/master/module_6/autoru_parser.py,
таким образом часть работы по проекту выполнялась командно.

### Предобработка данных
Прежде чем использовать полученные данные в моделях, проведена очистка и генерация новых прпизнаков.
В основном, было необходимо устранить пропуски, привести категориальные данные к единому виду
в train и test. Для численных переменных применялось логарифмирование с целью уменьшения выбросов.

### CatBoost
Данная модель применялась первой по счету, был достигнуть score порядка 12%, что в принципе неплохой результат. 
Однако имело смысл попробовать и другие ML модели.

### ExtraTreesRegressor
Вначале был применен алгоритм RandomForest, что сразу привело к улучшению score примерно 
до 10%.

Модель ExtraTreesRegressor показала наилучший результат среди прочих, порядка 9.7%. К тому же, расчеты для этой модели
проходят несколько быстрее, чем для CatBoost, изза возможности распараооеоивания рассчетов. 

### Blending / Stacking
Применение стекинга на основе StackingRegressor не показало улучшение результата относительного 
одного алгоритма ExtraTreesRegressor, далее было решено применить блендинг.
Применение блендинга в виде усреднения результатиов 15ти моделей ExtraTreesRegressor (с различным random_state) показало улучшение
score на 0.1 %. Применение блендинга или стекинга для "хорошей" модели ExtraTreesRegressor и прочих "плохих"
моделей ухудшило результат.

## Результаты
На сорвеновании финальный score получился 9.68 %.
Наиболее существенные признаки, влияющий на цену:
– общий пробег, средний пробег за год,
– год выпуска автомобиля и год выпуска данной модели,
– тип привода,
– тип трансмисии,
– объем, мощность двигателя и др.

Дальнейшие планы - попробовать еще улучшить score и разобраться с задачей парсинга, т.к. в данном 
проекте был использован парсер из другого проекта.











